<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Config</title>
    <script type="text/javascript">

    const remote = require('remote');
    const fs = require('fs');
    const config = require(__dirname+'/config.json');

    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('player_server').value = config.player.server;
        document.getElementById('player_client_id').value = config.player.client_id;
        document.getElementById('player_kiosk').checked = config.player.kiosk;
        document.getElementById('player_devtools').checked = config.player.devtools;
    }, false);

    function saveConfig(){
        config.player.server = document.getElementById('player_server').value;
        config.player.client_id = document.getElementById('player_client_id').value;
        config.player.kiosk = document.getElementById('player_kiosk').checked;
        config.player.devtools = document.getElementById('player_devtools').checked;

        console.log("Saving config...", config);
        fs.writeFile(__dirname+'/config.json', JSON.stringify(config, null, "    "), (err) => {
          if (err) alert("ERROR: Something went wrong when saving config");
          alert("Config saved");
        });
    }

    function quitApp(){
        console.log("Quitting app...");
        remote.app.quit();
    }

    </script>
    <style>
    *{

    }
    input[type=text]{
        width: 100%;
        font-size:1em;
    }
    button{
        font-size:1.5em;
    }

    </style>
  </head>
  <body>
    <h1>Config</h1>
    <p>
        <input id="player_server" type="text" placeholder="Server (https://dev.infoskjermer-norge.no)" value="">
    </p>
    <p>
        <input id="player_client_id" type="text" placeholder="Client ID" value="">
    </p>
    <p>
        <label>
            <input id="player_kiosk" type="checkbox" value="1"> Kiosk
        </label>
    </p>
    <p>
        <label>
            <input id="player_devtools" type="checkbox" value="1"> Developer Tools
        </label>
    </p>


    <p>
        <button onclick="saveConfig();">Save</button>
        <button onclick="quitApp();">Quit app</button>
    </p>

  </body>
</html>
